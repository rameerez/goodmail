<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
<head>
  <meta name="viewport" content="width=device-width" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title><%= subject %></title>
  <style type="text/css">
    /* Base Styles */
    img {
      max-width: 100%;
    }
    body {
      -webkit-font-smoothing: antialiased;
      -webkit-text-size-adjust: none;
      width: 100% !important;
      height: 100%;
      line-height: 1.6em;
      background-color: #f6f6f6; /* Body background */
      margin: 0;
      padding: 0;
    }
    table td {
      vertical-align: top;
    }
    .body-wrap {
      background-color: #f6f6f6;
      width: 100%;
    }
    .container {
      display: block !important;
      max-width: 600px !important;
      margin: 0 auto !important; /* Center the container */
      clear: both !important;
    }
    .content {
      max-width: 600px;
      margin: 0 auto;
      display: block;
      padding: 20px;
    }
    .main {
      background-color: #ffffff; /* Email body background */
      border: 1px solid #e9e9e9;
      border-radius: 3px;
    }
    .content-wrap {
      padding: 30px; /* Padding inside the white content area */
    }
    .header {
      width: 100%;
      margin-bottom: 20px;
      text-align: left;
    }
    .footer {
      width: 100%;
      clear: both;
      color: #999;
      padding: 20px;
      margin-top: 20px;
    }
    .footer p,
    .footer a,
    .footer td {
      color: #999;
      font-size: 12px;
      text-align: center;
      padding: 0 0 10px; /* Add padding between footer lines */
    }
    .footer a {
        text-decoration: underline;
        color: #999; /* Keep footer links grey */
    }

    /* Typography */
    h1, h2, h3 {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      color: #000000;
      margin: 40px 0 10px;
      line-height: 1.2em;
      font-weight: 400;
    }
    h1 { font-size: 32px; font-weight: 500; }
    h2 { font-size: 24px; }
    h3 { font-size: 18px; }
    p, ul, ol {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      font-size: 15px; /* Slightly larger base font */
      font-weight: normal;
      margin-bottom: 15px;
      line-height: 1.6;
    }
    a {
      color: <%= config.brand_color %>; /* Use brand color for links */
      text-decoration: underline;
    }

    /* Elements generated by Builder */
    .goodmail-button a {
      font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif;
      box-sizing: border-box;
      font-size: 14px;
      color: #FFF !important; /* Ensure button text is white */
      text-decoration: none;
      line-height: 2em;
      font-weight: bold;
      text-align: center;
      cursor: pointer;
      display: inline-block;
      border-radius: 5px;
      text-transform: capitalize;
      background-color: <%= config.brand_color %>;
      margin: 0;
      border-color: <%= config.brand_color %>;
      border-style: solid;
      border-width: 10px 20px;
    }
    .goodmail-hr {
        border: none;
        border-top: 1px solid #e9e9e9; /* Match main border color */
        margin: 30px 0;
    }
    .goodmail-image {
        display: block;
        margin: 20px auto; /* Center images added via image() */
        max-width: 100%;
        height: auto;
    }
    /* Add styles for headings from builder if needed, or rely on base H tags */

    /* Responsive Styles */
    @media only screen and (max-width: 640px) {
      body {
        padding: 0 !important;
      }
      h1, h2, h3 {
        font-weight: 800 !important; margin: 20px 0 5px !important;
      }
      h1 { font-size: 22px !important; }
      h2 { font-size: 18px !important; }
      h3 { font-size: 16px !important; }
      .container {
        padding: 0 !important; width: 100% !important;
      }
      .content {
        padding: 0 !important;
      }
      .content-wrap {
        padding: 15px !important; /* Reduced padding on mobile */
      }
      .goodmail-button a {
          padding: 8px 16px !important; /* Slightly smaller button padding */
          font-size: 13px !important;
      }
    }

    /* Outlook/MSO Specific Fixes */
    /* Add any necessary MSO fixes here if testing reveals issues */

  </style>
</head>

<body itemscope itemtype="http://schema.org/EmailMessage" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: none; width: 100% !important; height: 100%; line-height: 1.6em; background-color: #f6f6f6; margin: 0;" bgcolor="#f6f6f6">

<!-- Hidden Preheader Text -->
<span style="display:none !important; font-size:1px; color:#ffffff; line-height:1px; max-height:0px; max-width:0px; opacity:0; overflow:hidden;">
  <%= preheader || subject %>
</span>

<table class="body-wrap" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; width: 100%; background-color: #f6f6f6; margin: 0;" bgcolor="#f6f6f6">
  <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
    <td style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top"></td>
    <td class="container" width="600" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; display: block !important; max-width: 600px !important; clear: both !important; margin: 0 auto;" valign="top">
      <div class="content" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; max-width: 600px; display: block; margin: 0 auto; padding: 20px;">

        <!-- Optional Header Section -->
        <% if config.logo_url %>
          <table class="header" width="100%" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0 0 20px; text-align: left;" align="left">
            <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
              <td style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0;" valign="top">
                <% if config.company_url.present? %>
                  <a href="<%= config.company_url %>" style="text-decoration:none; border:0;">
                    <img src="<%= config.logo_url %>" alt="<%= config.company_name %> Logo" height="30" style="max-height: 30px; width: auto; border:0; outline:none; text-decoration:none; display:block;" />
                  </a>
                <% else %>
                  <img src="<%= config.logo_url %>" alt="<%= config.company_name %> Logo" height="30" style="max-height: 30px; width: auto; border:0; outline:none; text-decoration:none; display:block;" />
                <% end %>
              </td>
            </tr>
          </table>
        <% end %>

        <!-- Main Content Body -->
        <table class="main" width="100%" cellpadding="0" cellspacing="0" itemprop="action" itemscope itemtype="http://schema.org/ConfirmAction" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; border-radius: 3px; background-color: #fff; margin: 0; border: 1px solid #e9e9e9;" bgcolor="#fff">
          <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
            <td class="content-wrap" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 30px;" valign="top">
              <meta itemprop="name" content="<%= subject %>" />
              <table width="100%" cellpadding="0" cellspacing="0" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
                <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
                  <td style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top">
                    <!-- DSL Content Goes Here -->
                    <%= body_html %>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>

        <!-- Footer Section -->
        <div class="footer" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; width: 100%; clear: both; color: #999; margin: 20px 0 0; padding: 20px;">
          <table width="100%" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
            <!-- Copyright -->
            <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
              <td class="aligncenter content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 12px; vertical-align: top; text-align: center; margin: 0; padding: 0 0 10px; color: #999;" align="center" valign="top">
                &copy; <%= Date.today.year %> <%= config.company_name %>
              </td>
            </tr>

            <!-- Optional Footer Text -->
            <% if config.footer_text.present? %>
              <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
                <td class="aligncenter content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 12px; vertical-align: top; text-align: center; margin: 0; padding: 0 0 10px; color: #999;" align="center" valign="top">
                  <%= config.footer_text %>
                </td>
              </tr>
            <% end %>

            <!-- Optional Unsubscribe Link -->
            <% if config.show_footer_unsubscribe_link && defined?(unsubscribe_url) && unsubscribe_url.present? %>
              <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
                <td class="aligncenter content-block" style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 12px; vertical-align: top; text-align: center; margin: 0; padding: 0 0 10px; color: #999;" align="center" valign="top">
                  <a href="<%= unsubscribe_url %>" style="color: #999;"><%= config.footer_unsubscribe_link_text %></a>
                </td>
              </tr>
            <% end %>

          </table>
        </div>

      </div> <!-- /.content -->
    </td>
    <td style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top"></td>
  </tr>
</table>

</body>
</html> 